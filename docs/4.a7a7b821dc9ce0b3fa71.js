(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{LBbO:function(t,e,n){"use strict";n.r(e),n.d(e,"AppAuthModule",(function(){return R}));var i=n("ofXK"),r=n("3Pt+"),o=n("kJ4b"),a=n("tyNb"),s=n("fXoL"),c=n("7PN8"),l=n("SxV6"),m=n("Wp6s"),u=n("bTqV");let b=(()=>{class t{constructor(t,e,n){this.route=t,this.router=e,this.accountService=n,this.loginInvalid=!1,this.loading=!1,this.submitted=!1}ngOnDestroy(){}ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}googleInit(){gapi.load("auth2",()=>{this.auth2=gapi.auth2.init({client_id:"1046162263305-bq46quqp3uju349omm64p2af8m7sftgj.apps.googleusercontent.com",prompt:"select_account"}),this.attachSignin(document.getElementById("googleBtn"))})}attachSignin(t){this.auth2.attachClickHandler(t,{},t=>{this.accountService.loginWithGoogle(t.getAuthResponse().id_token).pipe(Object(l.a)()).subscribe(t=>{this.router.navigate([this.returnUrl])},t=>{this.loading=!1,this.loginInvalid=!0})},t=>{alert(JSON.stringify(t,void 0,2))})}ngAfterViewInit(){this.googleInit()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(a.a),s.Mb(a.b),s.Mb(c.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-login-google"]],decls:6,vars:0,consts:[[1,"google-button"],["mat-button","","type","button","id","googleBtn",1,"login-button"],["src","assets/icons/google.png",1,"icon"]],template:function(t,e){1&t&&(s.Sb(0,"mat-card",0),s.Sb(1,"mat-card-subtitle"),s.Bc(2,"Or continue with"),s.Rb(),s.Sb(3,"button",1),s.Nb(4,"img",2),s.Bc(5," Sign In with Google "),s.Rb(),s.Rb())},directives:[m.a,m.h,u.b],styles:[".google-button[_ngcontent-%COMP%]{max-width:300px;display:block;margin-left:auto;margin-right:auto}.icon[_ngcontent-%COMP%]{height:24px;width:24px;margin-right:10px}.login-button[_ngcontent-%COMP%]{margin-bottom:1em}"]}),t})(),d=(()=>{class t{constructor(t,e){this.router=t,this.accountService=e,this.accountService.userValue&&this.router.navigate(["/"])}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(a.b),s.Mb(c.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"layout"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Nb(1,"router-outlet"),s.Nb(2,"app-login-google"),s.Rb())},directives:[a.f,b],styles:["app-login-google[_ngcontent-%COMP%]{margin:4em auto;text-align:center}"]}),t})();var g=n("kmnG"),p=n("qFsG"),h=n("Xa2L");function f(t,e){1&t&&(s.Sb(0,"mat-error"),s.Bc(1," The username and password were not recognised "),s.Rb())}function S(t,e){1&t&&s.Nb(0,"mat-spinner")}function v(t,e){1&t&&(s.Sb(0,"mat-error"),s.Bc(1," Registration failed "),s.Rb())}function w(t,e){1&t&&s.Nb(0,"mat-spinner")}const y=[{path:"",component:d,children:[{path:"login",component:(()=>{class t{constructor(t,e,n,i){this.formBuilder=t,this.route=e,this.router=n,this.accountService=i,this.loginInvalid=!1,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({email:["",[r.t.required,r.t.email]],password:["",[r.t.required,r.t.minLength(7)]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}onSubmit(){this.submitted=!0,this.form.invalid||(this.loading=!0,this.accountService.login(this.form.controls.email.value,this.form.controls.password.value).pipe(Object(l.a)()).subscribe(t=>{this.router.navigate([this.returnUrl])},t=>{this.loading=!1,this.loginInvalid=!0}))}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(r.d),s.Mb(a.a),s.Mb(a.b),s.Mb(c.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["ng-component"]],decls:19,vars:5,consts:[[3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"full-width-input"],["matInput","","placeholder","Email","formControlName","email","required",""],["matInput","","type","password","placeholder","Password","formControlName","password","required",""],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-button","","type","button","routerLink","../register",3,"disabled"]],template:function(t,e){1&t&&(s.Sb(0,"mat-card"),s.Sb(1,"mat-card-content"),s.Sb(2,"form",0),s.Zb("ngSubmit",(function(){return e.onSubmit()})),s.Sb(3,"h2"),s.Bc(4,"Log In"),s.Rb(),s.zc(5,f,2,0,"mat-error",1),s.Sb(6,"mat-form-field",2),s.Nb(7,"input",3),s.Sb(8,"mat-error"),s.Bc(9," Please provide a valid email address "),s.Rb(),s.Rb(),s.Sb(10,"mat-form-field",2),s.Nb(11,"input",4),s.Sb(12,"mat-error"),s.Bc(13," Please provide a valid password "),s.Rb(),s.Rb(),s.Sb(14,"button",5),s.Bc(15," Login "),s.Rb(),s.Sb(16,"button",6),s.Bc(17," Register "),s.Rb(),s.Rb(),s.zc(18,S,1,0,"mat-spinner",1),s.Rb(),s.Rb()),2&t&&(s.Bb(2),s.kc("formGroup",e.form),s.Bb(3),s.kc("ngIf",e.loginInvalid),s.Bb(9),s.kc("disabled",e.loading),s.Bb(2),s.kc("disabled",e.loading),s.Bb(2),s.kc("ngIf",e.loading))},directives:[m.a,m.d,r.u,r.n,r.h,i.m,g.c,p.b,r.c,r.m,r.g,r.s,g.b,u.b,a.c,h.b],styles:["mat-card[_ngcontent-%COMP%]{max-width:400px;margin:4em auto;text-align:center}mat-form-field[_ngcontent-%COMP%]{display:block}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}button[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em}.icon[_ngcontent-%COMP%]{height:24px;width:24px;margin-right:10px}"]}),t})()},{path:"register",component:(()=>{class t{constructor(t,e,n,i){this.formBuilder=t,this.route=e,this.router=n,this.accountService=i,this.registrationInvalid=!1,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({email:["",[r.t.required,r.t.email]],username:["",r.t.required],password:["",[r.t.required,r.t.minLength(7)]],confirmationPassword:["",[r.t.required,r.t.minLength(7)]]},{validator:this.checkPasswords})}checkPasswords(t){return t.get("password").value===t.get("confirmationPassword").value?null:{notSame:!0}}onSubmit(){this.submitted=!0,this.form.invalid||(this.loading=!0,this.accountService.register(this.form.value).pipe(Object(l.a)()).subscribe(t=>{this.router.navigate(["../login"],{relativeTo:this.route})},t=>{this.loading=!1,this.registrationInvalid=!0}))}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(r.d),s.Mb(a.a),s.Mb(a.b),s.Mb(c.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["ng-component"]],decls:27,vars:5,consts:[[3,"formGroup","ngSubmit"],[4,"ngIf"],["matInput","","type","email","placeholder","Email","formControlName","email","required",""],["matInput","","placeholder","Username","formControlName","username","required",""],["matInput","","type","password","placeholder","Password","formControlName","password","required",""],["matInput","","type","password","placeholder","Confirm password","formControlName","confirmationPassword","required",""],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-button","","type","button","routerLink","../login",3,"disabled"]],template:function(t,e){1&t&&(s.Sb(0,"mat-card"),s.Sb(1,"mat-card-content"),s.Sb(2,"form",0),s.Zb("ngSubmit",(function(){return e.onSubmit()})),s.Sb(3,"h2"),s.Bc(4,"Sign Up"),s.Rb(),s.zc(5,v,2,0,"mat-error",1),s.Sb(6,"mat-form-field"),s.Nb(7,"input",2),s.Sb(8,"mat-error"),s.Bc(9," Please provide a valid email address "),s.Rb(),s.Rb(),s.Sb(10,"mat-form-field"),s.Nb(11,"input",3),s.Sb(12,"mat-error"),s.Bc(13," Please provide a valid username "),s.Rb(),s.Rb(),s.Sb(14,"mat-form-field"),s.Nb(15,"input",4),s.Sb(16,"mat-error"),s.Bc(17," Please provide a valid password "),s.Rb(),s.Rb(),s.Sb(18,"mat-form-field"),s.Nb(19,"input",5),s.Sb(20,"mat-error"),s.Bc(21," Passwords must match "),s.Rb(),s.Rb(),s.Sb(22,"button",6),s.Bc(23," Submit "),s.Rb(),s.Sb(24,"button",7),s.Bc(25," Login "),s.Rb(),s.Rb(),s.zc(26,w,1,0,"mat-spinner",1),s.Rb(),s.Rb()),2&t&&(s.Bb(2),s.kc("formGroup",e.form),s.Bb(3),s.kc("ngIf",e.registrationInvalid),s.Bb(17),s.kc("disabled",e.loading),s.Bb(2),s.kc("disabled",e.loading),s.Bb(2),s.kc("ngIf",e.loading))},directives:[m.a,m.d,r.u,r.n,r.h,i.m,g.c,p.b,r.c,r.m,r.g,r.s,g.b,u.b,a.c,h.b],styles:["mat-card[_ngcontent-%COMP%]{max-width:400px;margin:4em auto;text-align:center}mat-form-field[_ngcontent-%COMP%]{display:block}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}button[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em}"]}),t})()}]}];let B=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(y)],a.e]}),t})(),R=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[i.c,r.r,B,o.a]]}),t})()}}]);